## ARC 规则

前面的章节，我们回顾了没有 ARC 环境下 OC 的内存管理。但是当使用 ARC 时会发生什么呢？这一章我们探讨使用 ARC 后发生的变化。自动引用计数在第一章简短的介绍了下，但是苹果有更好的解释。

> OC 中的 ARC 使用编译器来管理内存。使用苹果新的编译器 LLVM 允许使用 ARC，你将不再需要 retain 和 release，仅仅专注于开发，这样可以减少奔溃和内存泄漏。编译器可以完全读懂你的对象，及时释放你不再使用的对象，因此 APP 将和以往运行一样快，具有可预测性、平滑的性能。

首先，我们来说明引用计数规则和ARC的关系，并且学习每个拥有权的说明符，这是ARC中的新内容。ARC也带给我们新的属性。更重要的是，通过学习这些规则让我们的代码更友好：仅仅遵循这些规则，你讲很自信的使用ARC写代码。

### 概述
事实上，引用计数一直使用作为ARC的基础，但是当你遵循ARC规则，ARC帮助引用计数机制自动的工作，这些将在这一章讲述。事实上，我们可以开启或关闭每一个编译单元的ARC。总的来说，ARC 最重要的是，编程者不再需要调用 “retain” 和 “release.” 一下条件下，你的源代码将自动允许 ARC：

- clang(LLVM compiler) 3.0 and newer
- Compile option –fobjc-arcClange 是默认的编译器，–fobjc-arc 选项在 Xcode 4.2 中默认设置了。因此，当你使用 Xcode 4.2，你不再需要做一些特性的设置。

### 引用机制的改变

正如我们以前的描述，引用计数的规则如下：

- 你拥有了你所创建的对象
- 通过 reatin 来拥有一个对象
- 不再需要的时候，你需要释放对一个对象的拥有权
- 不能释放你不再拥有的对象

尽管使用了 ARC 这些规则一直实用。但是你需要对源码做一些修改。做之前，你需要理解拥有说明符，ARC 中新加的。 
### 拥有说明符

在 Objective-C 中，id 和 对象类型用来作为变量的类型。对象类型在 OC 中是指针类型，例如 NSObject \*，id 类型用来隐藏它的类名。id 与 C 语言中的 void* 是一样的。使用 ARC，‘id’ 和的对象类型必须使用下面的拥有说明符。
- __strong- __weak- __unsafe_unretained   
- __autoreleasing

在你的源码中遇到 ‘id’ 和对象类型时，你需要决定使用哪一个拥有说明符。这章，我将解释咋样选择拥有说明符。the instant：瞬间
predictable：可预见的
performance：性能
specifiers：说明符
Overview：概述